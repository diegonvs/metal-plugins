<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Demo: Clipboard</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="../bower_components/steel-bootstrap/build/bootstrap.css">
	<link rel="stylesheet" href="../bower_components/steel-bootstrap/build/fonts/icon-16.css">

	<script src="../bower_components/soyutils/soyutils.js"></script>
	<script src="../bower_components/steel-components/build/globals/steel-min.js"></script>
	<script src="../build/globals/clipboard.js"></script>

	<style>
	body {
		width: 480px;
		margin: 0 auto;
	}

	.icon-16-link {
		cursor: pointer;
		z-index: 2;
	}

	.icon-16-link:hover {
		color: rgba(35, 50, 64, 0.7);
	}

	#textarea-btn {
		margin-top: 10px;
	}
	</style>
</head>
<body>
	<h2>Copy text from attribute</h2>

	<button class="btn btn-sm btn-success" data-clipboard data-text="Button" type="button">Copy to clipboard</button>

	<hr>

	<h2>Copy text from another element</h2>

	<div class="input-inner-addon input-inner-addon-left">
		<span id="icon-copy" class="icon-16-link" data-clipboard data-target="input" type="button"></span>
		<input id="input" class="form-control" type="text" value="https://github.com/metal/steel-clipboard">
	</div>

	<hr>

	<h2>Cut text from another element</h2>

	<textarea id="textarea" class="form-control" rows="5" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">Mussum ipsum cacilds, vidis litro abertis. Consetis adipiscings elitis. Pra lá , depois divoltis porris, paradis. Paisis, filhis, espiritis santis. Mé faiz elementum girarzis, nisi eros vermeio, in elementis mé pra quem é amistosis quis leo. Manduma pindureta quium dia nois paga.</textarea>

	<button id="textarea-btn" class="btn btn-sm btn-success" data-clipboard data-action="cut" data-target="textarea" type="button">Cut to clipboard</button>

	<hr>

	<h2>Copy text from non-editable element</h2>

	<p id="paragraph">Mussum ipsum cacilds, vidis litro abertis. Consetis adipiscings elitis. Pra lá , depois divoltis porris, paradis. Paisis, filhis, espiritis santis. Mé faiz elementum girarzis, nisi eros vermeio, in elementis mé pra quem é amistosis quis leo. Manduma pindureta quium dia nois paga.</p>

	<button class="btn btn-sm btn-success" data-clipboard data-target="paragraph">Copy to clipboard</button>

	<script>
		var tooltip = new steel.Tooltip({
			delay: [0, 0],
			triggerEvents: [null, 'mouseleave'],
			selector: '[data-clipboard]',
			visible: false
		}).render();

		var clipboard = new steel.Clipboard();

		clipboard.on('success', function(e) {
			clipboard.clearSelection();

			showTooltip(e.trigger, 'Copied!');

			console.info('Action:', e.action);
			console.info('Text:', e.text);
		});

		clipboard.on('error', function(e) {
			showTooltip(e.trigger, messageFallback(e.action));
		});

		function showTooltip(elem, msg) {
			tooltip.content = msg;
			tooltip.alignElement = elem;
			tooltip.visible = true;
		}

		function messageFallback(action) {
			var actionKey, actionCommand;

			if (action === 'copy') {
				actionKey = 'C';
			}
			else {
				actionKey = 'X';
			}

			// Simplistic detection, do not use it in production
			if(/iPhone|iPad/i.test(navigator.userAgent)) {
				actionCommand = 'No support :(';
				clipboard.clearSelection();
			}
			else if (/Mac/i.test(navigator.userAgent)) {
				actionCommand = 'Press ⌘-' + actionKey + ' to ' + action;
			}
			else {
				actionCommand = 'Press Ctrl-' + actionKey + ' to ' + action;
			}

			return actionCommand;
		}
	</script>
</body>
</html>
